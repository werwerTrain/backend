{"apifoxCli":"1.2.36","item":[{"item":[{"id":"b65e2a1e-2f20-5a3b-96cd-d87e63d8fb0d","type":"group","metaInfo":{"id":"b65e2a1e-2f20-5a3b-96cd-d87e63d8fb0d","type":"group","scopeType":"start","scopeEndId":"6a450891-6bdb-5c93-bd3b-18306b9410f4","name":"root"}},{"id":"2f52a079-e3a0-4f87-b085-18a2a5728f31","name":"用户注册","request":{"url":{"protocol":"http","port":"30001","path":["api","register"],"host":["10","192","253","59"],"query":[],"variable":[]},"header":[{"key":"User-Agent","value":"Apifox/1.0.0 (https://apifox.com)"},{"key":"Content-Type","value":"application/json"}],"method":"POST","baseUrl":"http://10.192.253.59:30001/api","body":{"mode":"raw","raw":"{\n    \"id\": \"120110200001011234\",\n    \"name\": \"小红\",\n    \"password\": \"123123hhh\",\n    \"email\": \"123@123.com\",\n    \"time\": \"2\"\n}","generateMode":"normal","type":"application/json"},"auth":{"type":"noauth","noauth":[]},"type":"http"},"response":[],"event":[],"responseDefinition":{"id":451174713,"name":"成功","code":200,"contentType":"json","jsonSchema":{"type":"object","properties":{"result":{"type":"boolean","title":"是否成功","description":"成功为true，失败为false"},"reason":{"type":"string","title":"失败原因","description":"result为false时显示失败的原因"}},"x-apifox-orders":["result","reason"],"required":["result","reason"]},"defaultEnable":true,"ordering":1,"description":"","mediaType":"","headers":[],"schemaDefinitions":{}},"requestDefinition":{"jsonSchema":{"type":"object","properties":{"id":{"type":"string","description":"ID 编号","mock":{"mock":"@regexp(/[1-9]\\d{5}(18|19|20)\\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\\d{3}[0-9Xx]/)"}},"password":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"time":{"type":"integer","title":"第几次","description":"1 or 2"}},"x-apifox-orders":["id","name","password","email","time"],"required":["id","name","password","email","time"]}},"overrideRequesterOptions":{"strictSSL":false,"followRedirects":false},"metaInfo":{"httpApiId":174216373,"httpApiCaseId":188720350,"httpApiName":"用户注册","httpApiPath":"/register","httpApiMethod":"post","httpApiCaseName":"用户注册","id":"2f52a079-e3a0-4f87-b085-18a2a5728f31","type":"http","name":"用户注册","relatedId":4939972,"blockId":"2f52a079-e3a0-4f87-b085-18a2a5728f31"},"type":"http","protocolProfileBehavior":{"useWhatWGUrlParser":false,"disableUrlEncoding":false,"disabledSystemHeaders":{},"disableCookies":false}},{"id":"ad6bf5d2-2bf8-41f6-94b2-3dfc32a563c2","name":"用户登录","request":{"url":{"protocol":"http","port":"30001","path":["api","login"],"host":["10","192","253","59"],"query":[],"variable":[]},"header":[{"key":"User-Agent","value":"Apifox/1.0.0 (https://apifox.com)"},{"key":"Content-Type","value":"application/json"}],"method":"POST","baseUrl":"http://10.192.253.59:30001/api","body":{"mode":"raw","raw":"{\n    \"id\": \"120110200001011234\",\n    \"password\": \"123123hhh\"\n}","generateMode":"normal","type":"application/json"},"auth":{"type":"noauth","noauth":[]},"type":"http"},"response":[],"event":[],"responseDefinition":{"id":451185234,"name":"成功","code":200,"contentType":"json","jsonSchema":{"type":"object","properties":{"result":{"type":"boolean","title":"结果","description":"成功返回true，失败返回false"},"email":{"type":["string","null"],"title":"返回信息"},"name":{"type":["string","null"],"title":"返回昵称"},"message":{"type":"string","title":"错误原因"}},"x-apifox-orders":["result","email","name","message"],"required":["result","message"]},"defaultEnable":true,"ordering":1,"description":"","mediaType":"","headers":[],"schemaDefinitions":{}},"requestDefinition":{"jsonSchema":{"type":"object","properties":{"id":{"type":"string","title":"用户id","description":"身份证号"},"password":{"type":"string","title":"用户密码"}},"x-apifox-orders":["id","password"],"required":["id","password"]}},"overrideRequesterOptions":{"strictSSL":false,"followRedirects":false},"metaInfo":{"httpApiId":174217057,"httpApiCaseId":188724092,"httpApiName":"用户登录","httpApiPath":"/login","httpApiMethod":"post","httpApiCaseName":"用户登录","id":"ad6bf5d2-2bf8-41f6-94b2-3dfc32a563c2","type":"http","name":"用户登录","relatedId":4939972,"blockId":"ad6bf5d2-2bf8-41f6-94b2-3dfc32a563c2"},"type":"http","protocolProfileBehavior":{"useWhatWGUrlParser":false,"disableUrlEncoding":false,"disabledSystemHeaders":{},"disableCookies":false}},{"id":"8e0de754-80e9-458f-93eb-8e1ca4829d20","name":"获取城市","request":{"url":{"protocol":"http","port":"30001","path":["api","getPlaces"],"host":["10","192","253","59"],"query":[],"variable":[]},"header":[{"key":"User-Agent","value":"Apifox/1.0.0 (https://apifox.com)"}],"method":"GET","baseUrl":"http://10.192.253.59:30001/api","body":{},"type":"http"},"response":[],"event":[],"responseDefinition":{"id":453181561,"name":"成功","code":200,"contentType":"json","jsonSchema":{"type":"object","properties":{"places":{"type":"array","items":{"type":"object","properties":{"place":{"type":"string","title":"地点"}},"x-apifox-orders":["place"],"required":["place"]}}},"x-apifox-orders":["places"],"required":["places"]},"defaultEnable":true,"ordering":1,"description":"","mediaType":"","headers":[],"schemaDefinitions":{}},"requestDefinition":{"jsonSchema":{}},"overrideRequesterOptions":{"strictSSL":false,"followRedirects":false},"metaInfo":{"httpApiId":175225912,"httpApiCaseId":188755380,"httpApiName":"获取城市","httpApiPath":"/getPlaces","httpApiMethod":"get","httpApiCaseName":"获取城市","id":"8e0de754-80e9-458f-93eb-8e1ca4829d20","type":"http","name":"获取城市","relatedId":4939972,"blockId":"8e0de754-80e9-458f-93eb-8e1ca4829d20"},"type":"http","protocolProfileBehavior":{"useWhatWGUrlParser":false,"disableUrlEncoding":false,"disabledSystemHeaders":{},"disableCookies":false}},{"id":"d08a6606-b91f-47c0-8cdb-f82296fbc94f","name":"酒店查询","request":{"url":{"protocol":"http","port":"30001","path":["api","hotel","%E4%B8%8A%E6%B5%B7%E5%B8%82","2024-06-04","2024-06-05"],"host":["10","192","253","59"],"query":[{"disabled":false,"key":"sort_type"}],"variable":[{"disabled":false,"type":"string","value":"%E4%B8%8A%E6%B5%B7%E5%B8%82","key":"arrive_station"},{"disabled":false,"type":"string","value":"2024-06-04","key":"arrive_date"},{"disabled":false,"type":"string","value":"2024-06-05","key":"ldeparture_date"}]},"header":[{"key":"User-Agent","value":"Apifox/1.0.0 (https://apifox.com)"}],"method":"GET","baseUrl":"http://10.192.253.59:30001/api","body":{},"auth":{"type":"noauth","noauth":[]},"type":"http"},"response":[],"event":[{"listen":"test","script":{"id":"postProcessors.0.httpApiExtractor","type":"text/javascript","exec":["","        if (JSON.setEnableBigInt) {","          JSON.setEnableBigInt(undefined);","        }","        let requestJSON, responseJSON;","      const extracts = [{\"expression\":\"$.4.response.body.result[*].id\",\"paths\":[\"$\",\"4\",\"response\",\"body\",\"result[*]\",\"id\"]}];","      function getJSONPath(paths, index) {","        const path = paths.slice(index).join('.');","        const root = path[0] === '[' ? '$' : '$.';","        return root + path;","      }","      function extractJSON(json, path) {","        const JSONPath = require('jsonpath-plus').JSONPath;","        return JSONPath({ json, path, wrap: false });","      }","      function getValue(propertyList, targetKey, keyName) {","        keyName = keyName || 'key';","        if (propertyList.filter) {","          const values = propertyList.filter(item => item[keyName] === targetKey);","          if (values.length === 1) {","            return values[0].value;","          } else if (values.length > 1) {","            return values.map(item => item.value);","          }","        } else if (propertyList.get) {","          return propertyList.get(targetKey);","        }","        return undefined;","      }","      ","      for (const { expression, paths } of extracts) {","        let value;","        try {","          if (paths[2] === 'request') {","            if (paths[3] === 'url') {","              value = pm.request.url.toString();","            } else if (paths[3] === 'headers' || paths[3] === 'header') {","              value = getValue(pm.request.headers, paths[4]);","            } else if (paths[3] === 'pathParams' || paths[3] === 'pathParam') {","              value = getValue(pm.request.url.variables, paths[4]);","            } else if (paths[3] === 'query' || paths[3] === 'params' || paths[3] === 'param') {","              value = getValue(pm.request.url.query, paths[4]);","            } else if (paths[3] === 'body') {","              const body = pm.request.body;","              const bodyData = body[body.mode];","              if (typeof bodyData === \"string\") {","                if (!requestJSON) {","                  requestJSON = JSON.parse(bodyData);","                }","                value = extractJSON(requestJSON, getJSONPath(paths, 4));","              } else {","                value = getValue(bodyData, paths[4]);","                if (value === undefined) {","                  value = extractJSON(body, getJSONPath(paths, 4));","                }","              }","            } else if (paths[3] === 'cookies' || paths[3] === 'cookie') {","              const cookies = pm.request.headers.get('Cookie') || '';","              if (paths[4]) {","                cookies.split(';').find(cookie => {","                  const splitIndex = cookie.indexOf('=');","                  const cookieKey = cookie.slice(0, splitIndex);","                  const cookieValue = cookie.slice(splitIndex + 1);","                  if (cookieKey === paths[4]) {","                    value = cookieValue;","                    return true;","                  }","                })","              } else {","                value = cookies;","              }","            } else {","              value = extractJSON(pm.request, getJSONPath(paths, 3));","            }","          } else if (paths[2] === 'response') {","            if (paths[3] === 'headers' || paths[3] === 'header') {","              value = getValue(pm.response.headers, paths[4]);","            } else if (paths[3] === 'cookies' || paths[3] === 'cookie') {","              value = getValue(pm.response.cookies, paths[4], 'name');","            } else if (paths[3] === 'body') {","              if (!responseJSON) {","                responseJSON = pm.response.json();","              }","              value = extractJSON(responseJSON, getJSONPath(paths, 4));","            } else {","              value = extractJSON(pm.response, getJSONPath(paths, 3));","            }","          } ","","          if (value === null) {","            value = 'null'","          }","","          pm.variables.set(expression, value);","        } catch (e) {","          console.log('httpApiExtractorScriptError', e)","        }","      }","      "]}}],"responseDefinition":{"id":447523579,"name":"成功","code":200,"contentType":"json","jsonSchema":{"type":"object","properties":{"result":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","title":"酒店名","description":"名称"},"photo":{"type":"string","title":"一个图片链接"},"likes":{"type":"integer","title":"点赞数"},"stars":{"type":"integer","title":"收藏数"},"rank":{"type":"number","title":"评分","description":"0-5"},"messages":{"type":"integer","title":"评论数"},"content":{"type":"string","title":"简单描述"},"miniprice":{"type":"string","title":"价格（最低价）"},"id":{"type":"string","title":"酒店id","description":"ID 编号"},"position":{"type":"string","title":"地址"}},"x-apifox-orders":["id","name","rank","stars","likes","messages","miniprice","photo","position","content"],"required":["name","photo","rank","miniprice","likes","stars","messages","position","content","id"]}}},"x-apifox-orders":["result"],"required":["result"]},"defaultEnable":true,"ordering":1,"description":"","mediaType":"","headers":[],"schemaDefinitions":{}},"requestDefinition":{"jsonSchema":{}},"overrideRequesterOptions":{"strictSSL":false,"followRedirects":false},"metaInfo":{"httpApiId":172378063,"httpApiCaseId":188755379,"httpApiName":"酒店查询","httpApiPath":"/hotel/{arrive_station}/{arrive_date}/{ldeparture_date}","httpApiMethod":"get","httpApiCaseName":"酒店查询","id":"d08a6606-b91f-47c0-8cdb-f82296fbc94f","type":"http","name":"酒店查询","relatedId":4939972,"blockId":"d08a6606-b91f-47c0-8cdb-f82296fbc94f"},"type":"http","protocolProfileBehavior":{"useWhatWGUrlParser":false,"disableUrlEncoding":false,"disabledSystemHeaders":{},"disableCookies":false}},{"id":"35f9fe4f-ea0d-4803-a558-4062f72e1dec","type":"forEach","number":10,"parameters":{"array":"{{$.4.response.body.result[*].id}}","disableOnError":false},"disable":false,"metaInfo":{"id":"35f9fe4f-ea0d-4803-a558-4062f72e1dec","type":"forEach","number":10,"scopeType":"start","scopeEndId":"40e16825-7b83-58eb-a704-a67ccb95887c","index":1,"arrayVariable":"$.4.response.body.result[*].id","disableOnError":false,"extracts":[{"expression":"$.10.element","paths":["$","10","element"]}]}},{"id":"67ba5eb8-78f0-4892-9db7-71223923e45c","name":"酒店详细查询","request":{"url":{"protocol":"http","port":"30001","path":["api","hotel_detail"],"host":["10","192","253","59"],"query":[{"disabled":false,"key":"hotel_id","value":"{{$.10.element}}"},{"disabled":false,"key":"double_choose"},{"disabled":false,"key":"big_choose"},{"disabled":false,"key":"family_choose"},{"disabled":false,"key":"check_in","value":"2024-06-04"},{"disabled":false,"key":"check_out","value":"2024-06-05"}],"variable":[]},"header":[{"key":"User-Agent","value":"Apifox/1.0.0 (https://apifox.com)"}],"method":"GET","baseUrl":"http://10.192.253.59:30001/api","body":{},"auth":{"type":"noauth","noauth":[]},"type":"http"},"response":[],"event":[],"responseDefinition":{"id":453890640,"name":"成功","code":200,"contentType":"json","jsonSchema":{"type":"object","properties":{"name":{"type":"string","title":"酒店名","description":"名称"},"rank":{"type":"number","title":"评分"},"stars":{"type":"integer","title":"收藏数"},"likes":{"type":"integer","title":"点赞数"},"messages":{"type":"integer","title":"评论数"},"photos":{"type":"array","items":{"type":"string"},"title":"图片链接数组","description":"至少五个吧"},"position":{"type":"string","title":"地址"},"comments":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","title":"用户名"},"time":{"type":"string","title":"评论时间"},"content":{"type":"string","title":"评论内容"},"place":{"type":"string","title":"ip地点"},"room":{"type":"string","title":"选择的房型"},"rank":{"type":"number","title":"评分","description":"0-5"},"photo":{"type":"string","title":"头像url"}},"x-apifox-orders":["name","time","content","place","room","rank","photo"],"required":["name","time","content","place","room","rank","photo"]},"title":"评论"},"rooms":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","title":"房间名"},"photo":{"type":"string","title":"图片url"},"price":{"type":"number","title":"房型价格"},"num":{"type":"integer","title":"房型数量","description":"如：10"},"size":{"type":"string","title":"房间大小"},"others":{"type":"string","title":"其他信息","description":"一些文字的情况说明"},"bed-size":{"type":"string","title":"床形","description":"如：1张1.5米双人穿"}},"x-apifox-orders":["name","photo","price","num","size","others","bed-size"],"required":["name","photo","price","num","size","others","bed-size"]},"title":"房间"},"others":{"type":"object","properties":{"phone":{"type":"string","title":"联系电话"},"set_time":{"type":"string","title":"成立时间"},"description":{"type":"string","title":"酒店详细介绍"},"breakfast_description":{"type":"string","title":"早餐详细","description":"是否提供早餐，早餐类型"},"checkin_time":{"type":"string","title":"入住时间","description":"入住时间要求"},"checkout_time":{"type":"string","title":"离开时间","description":"退房时间要求"},"age_notion":{"type":"string","title":"年龄限制"}},"title":"其他信息","x-apifox-orders":["phone","set_time","description","breakfast_description","age_notion","checkin_time","checkout_time"],"required":["phone","set_time","description","breakfast_description","age_notion","checkin_time","checkout_time"]}},"x-apifox-orders":["name","rank","stars","likes","messages","photos","position","comments","rooms","others"],"required":["name","rank","stars","likes","messages","photos","position","comments","rooms","others"]},"defaultEnable":true,"ordering":1,"description":"","mediaType":"","headers":[],"schemaDefinitions":{}},"requestDefinition":{"jsonSchema":{}},"overrideRequesterOptions":{"strictSSL":false,"followRedirects":false},"metaInfo":{"httpApiId":175585479,"httpApiCaseId":188756288,"httpApiName":"酒店详细查询","httpApiPath":"/hotel_detail","httpApiMethod":"get","httpApiCaseName":"酒店详细查询","id":"67ba5eb8-78f0-4892-9db7-71223923e45c","type":"http","name":"酒店详细查询","relatedId":4939972,"blockId":"67ba5eb8-78f0-4892-9db7-71223923e45c"},"type":"http","protocolProfileBehavior":{"useWhatWGUrlParser":false,"disableUrlEncoding":false,"disabledSystemHeaders":{},"disableCookies":false}},{"id":"40e16825-7b83-58eb-a704-a67ccb95887c","type":"forEach","metaInfo":{"id":"40e16825-7b83-58eb-a704-a67ccb95887c","type":"forEach","scopeType":"end","scopeStartId":"35f9fe4f-ea0d-4803-a558-4062f72e1dec"}},{"id":"113d98cf-fc35-414b-be40-fa0eb99e2c24","name":"酒店结算","request":{"url":{"protocol":"http","port":"30001","path":["api","hotel","bill"],"host":["10","192","253","59"],"query":[],"variable":[]},"header":[{"key":"User-Agent","value":"Apifox/1.0.0 (https://apifox.com)"},{"key":"Content-Type","value":"application/json"}],"method":"POST","baseUrl":"http://10.192.253.59:30001/api","body":{"mode":"raw","raw":"{\n    \"hotel_id\": \"H00001\",\n    \"id\": \"120110200001011234\",\n    \"checkin_time\": \"2024-06-04\",\n    \"checkout_time\": \"2024-06-05\",\n    \"room_num\": 1,\n    \"room_type\": 1,\n    \"customers\": [\n        {\n            \"name\": \"11\",\n            \"id\": \"120110200001011234\"\n        }\n    ],\n    \"money\": 100\n}","generateMode":"normal","type":"application/json"},"auth":{"type":"noauth","noauth":[]},"type":"http"},"response":[],"event":[],"responseDefinition":{"id":450487303,"name":"成功","code":200,"contentType":"json","jsonSchema":{"type":"object","properties":{"result":{"type":"boolean","title":"结果","description":"支付是否成功"}},"x-apifox-orders":["result"],"required":["result"]},"defaultEnable":true,"ordering":1,"description":"","mediaType":"","headers":[],"schemaDefinitions":{}},"requestDefinition":{"jsonSchema":{"type":"object","properties":{"checkin_time":{"type":"string","title":"入住时间"},"checkout_time":{"type":"string","title":"退房时间"},"room_num":{"type":"integer","title":"房间个数"},"room_type":{"type":"integer","title":"房间类型","description":"1->\"标准双人间\"，2->\"大床房\" 3->\"家庭房\""},"customers":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","title":"姓名"},"id":{"type":"string","title":"身份证号"}},"x-apifox-orders":["name","id"],"required":["name","id"]},"title":"顾客信息"},"money":{"type":"number","title":"总金额"},"id":{"type":"string","title":"顾客id","description":"ID 编号"},"hotel_id":{"type":"string","title":"酒店id"}},"x-apifox-orders":["hotel_id","id","checkin_time","checkout_time","room_num","room_type","customers","money"],"required":["checkin_time","checkout_time","room_num","room_type","customers","money","id","hotel_id"]}},"overrideRequesterOptions":{"strictSSL":false,"followRedirects":false},"metaInfo":{"httpApiId":173860422,"httpApiCaseId":188755377,"httpApiName":"酒店结算","httpApiPath":"/hotel/bill","httpApiMethod":"post","httpApiCaseName":"酒店结算","id":"113d98cf-fc35-414b-be40-fa0eb99e2c24","type":"http","name":"酒店结算","relatedId":4939972,"blockId":"113d98cf-fc35-414b-be40-fa0eb99e2c24"},"type":"http","protocolProfileBehavior":{"useWhatWGUrlParser":false,"disableUrlEncoding":false,"disabledSystemHeaders":{},"disableCookies":false}},{"id":"d9a5976b-188d-490d-8548-e5925727e268","name":"酒店订单获取","request":{"url":{"protocol":"http","port":"30001","path":["api","hotel","orders","120110200001011234","all"],"host":["10","192","253","59"],"query":[],"variable":[{"disabled":false,"type":"string","value":"120110200001011234","key":"userID"},{"disabled":false,"type":"string","value":"all","key":"status"}]},"header":[{"key":"User-Agent","value":"Apifox/1.0.0 (https://apifox.com)"}],"method":"GET","baseUrl":"http://10.192.253.59:30001/api","body":{},"auth":{"type":"noauth","noauth":[]},"type":"http"},"response":[],"event":[],"responseDefinition":{"id":457698399,"name":"成功","code":200,"contentType":"json","jsonSchema":{"type":"object","properties":{"result":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","title":"酒店名"},"position":{"type":"string","title":"酒店地址"},"check_in":{"type":"string","title":"入住时间"},"check_out":{"type":"string","title":"退房时间"},"oid":{"type":"string","title":"订单号"},"money":{"type":"number","title":"总金额"},"roomtype":{"type":"string","title":"房间名"},"customers":{"type":"array","items":{"type":"string"},"title":"顾客名字"},"time":{"type":"string","title":"下单时间"},"num":{"type":"integer","title":"房间个数"},"status":{"type":"string","title":"订单状态"}},"x-apifox-orders":["oid","time","name","position","check_in","check_out","money","roomtype","customers","num","status"],"required":["name","position","check_in","check_out","oid","money","roomtype","customers","time","num","status"]}}},"x-apifox-orders":["result"],"required":["result"]},"defaultEnable":true,"ordering":1,"description":"","mediaType":"","headers":[],"schemaDefinitions":{}},"requestDefinition":{"jsonSchema":{}},"overrideRequesterOptions":{"strictSSL":false,"followRedirects":false},"metaInfo":{"httpApiId":177540438,"httpApiCaseId":188755376,"httpApiName":"酒店订单获取","httpApiPath":"/hotel/orders/{userID}/{status}","httpApiMethod":"get","httpApiCaseName":"酒店订单获取","id":"d9a5976b-188d-490d-8548-e5925727e268","type":"http","name":"酒店订单获取","relatedId":4939972,"blockId":"d9a5976b-188d-490d-8548-e5925727e268"},"type":"http","protocolProfileBehavior":{"useWhatWGUrlParser":false,"disableUrlEncoding":false,"disabledSystemHeaders":{},"disableCookies":false}},{"id":"df7c50e2-4015-45d6-bf7a-5876195c320c","name":"酒店订单获取","request":{"url":{"protocol":"http","port":"30001","path":["api","hotel","orders","120110200001011234","paid"],"host":["10","192","253","59"],"query":[],"variable":[{"disabled":false,"type":"string","value":"120110200001011234","key":"userID"},{"disabled":false,"type":"string","value":"paid","key":"status"}]},"header":[{"key":"User-Agent","value":"Apifox/1.0.0 (https://apifox.com)"}],"method":"GET","baseUrl":"http://10.192.253.59:30001/api","body":{},"auth":{"type":"noauth","noauth":[]},"type":"http"},"response":[],"event":[],"responseDefinition":{"id":457698399,"name":"成功","code":200,"contentType":"json","jsonSchema":{"type":"object","properties":{"result":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","title":"酒店名"},"position":{"type":"string","title":"酒店地址"},"check_in":{"type":"string","title":"入住时间"},"check_out":{"type":"string","title":"退房时间"},"oid":{"type":"string","title":"订单号"},"money":{"type":"number","title":"总金额"},"roomtype":{"type":"string","title":"房间名"},"customers":{"type":"array","items":{"type":"string"},"title":"顾客名字"},"time":{"type":"string","title":"下单时间"},"num":{"type":"integer","title":"房间个数"},"status":{"type":"string","title":"订单状态"}},"x-apifox-orders":["oid","time","name","position","check_in","check_out","money","roomtype","customers","num","status"],"required":["name","position","check_in","check_out","oid","money","roomtype","customers","time","num","status"]}}},"x-apifox-orders":["result"],"required":["result"]},"defaultEnable":true,"ordering":1,"description":"","mediaType":"","headers":[],"schemaDefinitions":{}},"requestDefinition":{"jsonSchema":{}},"overrideRequesterOptions":{"strictSSL":false,"followRedirects":false},"metaInfo":{"httpApiId":177540438,"httpApiCaseId":188760465,"httpApiName":"酒店订单获取","httpApiPath":"/hotel/orders/{userID}/{status}","httpApiMethod":"get","httpApiCaseName":"酒店订单获取","id":"df7c50e2-4015-45d6-bf7a-5876195c320c","type":"http","name":"酒店订单获取","relatedId":4939972,"blockId":"df7c50e2-4015-45d6-bf7a-5876195c320c"},"type":"http","protocolProfileBehavior":{"useWhatWGUrlParser":false,"disableUrlEncoding":false,"disabledSystemHeaders":{},"disableCookies":false}},{"id":"c6dfb610-0aef-4b53-a4f3-c6b57ddd0583","name":"获取所有消息","request":{"url":{"protocol":"http","port":"30001","path":["api","message","getAll","120110200001011234"],"host":["10","192","253","59"],"query":[],"variable":[{"disabled":false,"type":"string","value":"120110200001011234","key":"userID"}]},"header":[{"key":"User-Agent","value":"Apifox/1.0.0 (https://apifox.com)"}],"method":"GET","baseUrl":"http://10.192.253.59:30001/api","body":{},"type":"http"},"response":[],"event":[{"listen":"test","script":{"id":"postProcessors.0.httpApiExtractor","type":"text/javascript","exec":["","        if (JSON.setEnableBigInt) {","          JSON.setEnableBigInt(undefined);","        }","        let requestJSON, responseJSON;","      const extracts = [{\"expression\":\"$.13.response.body.result[0].mid\",\"paths\":[\"$\",\"13\",\"response\",\"body\",\"result[0]\",\"mid\"]}];","      function getJSONPath(paths, index) {","        const path = paths.slice(index).join('.');","        const root = path[0] === '[' ? '$' : '$.';","        return root + path;","      }","      function extractJSON(json, path) {","        const JSONPath = require('jsonpath-plus').JSONPath;","        return JSONPath({ json, path, wrap: false });","      }","      function getValue(propertyList, targetKey, keyName) {","        keyName = keyName || 'key';","        if (propertyList.filter) {","          const values = propertyList.filter(item => item[keyName] === targetKey);","          if (values.length === 1) {","            return values[0].value;","          } else if (values.length > 1) {","            return values.map(item => item.value);","          }","        } else if (propertyList.get) {","          return propertyList.get(targetKey);","        }","        return undefined;","      }","      ","      for (const { expression, paths } of extracts) {","        let value;","        try {","          if (paths[2] === 'request') {","            if (paths[3] === 'url') {","              value = pm.request.url.toString();","            } else if (paths[3] === 'headers' || paths[3] === 'header') {","              value = getValue(pm.request.headers, paths[4]);","            } else if (paths[3] === 'pathParams' || paths[3] === 'pathParam') {","              value = getValue(pm.request.url.variables, paths[4]);","            } else if (paths[3] === 'query' || paths[3] === 'params' || paths[3] === 'param') {","              value = getValue(pm.request.url.query, paths[4]);","            } else if (paths[3] === 'body') {","              const body = pm.request.body;","              const bodyData = body[body.mode];","              if (typeof bodyData === \"string\") {","                if (!requestJSON) {","                  requestJSON = JSON.parse(bodyData);","                }","                value = extractJSON(requestJSON, getJSONPath(paths, 4));","              } else {","                value = getValue(bodyData, paths[4]);","                if (value === undefined) {","                  value = extractJSON(body, getJSONPath(paths, 4));","                }","              }","            } else if (paths[3] === 'cookies' || paths[3] === 'cookie') {","              const cookies = pm.request.headers.get('Cookie') || '';","              if (paths[4]) {","                cookies.split(';').find(cookie => {","                  const splitIndex = cookie.indexOf('=');","                  const cookieKey = cookie.slice(0, splitIndex);","                  const cookieValue = cookie.slice(splitIndex + 1);","                  if (cookieKey === paths[4]) {","                    value = cookieValue;","                    return true;","                  }","                })","              } else {","                value = cookies;","              }","            } else {","              value = extractJSON(pm.request, getJSONPath(paths, 3));","            }","          } else if (paths[2] === 'response') {","            if (paths[3] === 'headers' || paths[3] === 'header') {","              value = getValue(pm.response.headers, paths[4]);","            } else if (paths[3] === 'cookies' || paths[3] === 'cookie') {","              value = getValue(pm.response.cookies, paths[4], 'name');","            } else if (paths[3] === 'body') {","              if (!responseJSON) {","                responseJSON = pm.response.json();","              }","              value = extractJSON(responseJSON, getJSONPath(paths, 4));","            } else {","              value = extractJSON(pm.response, getJSONPath(paths, 3));","            }","          } ","","          if (value === null) {","            value = 'null'","          }","","          pm.variables.set(expression, value);","        } catch (e) {","          console.log('httpApiExtractorScriptError', e)","        }","      }","      "]}}],"responseDefinition":{"id":455594184,"name":"成功","code":200,"contentType":"json","jsonSchema":{"type":"object","properties":{"result":{"type":"array","items":{"type":"object","properties":{"orderType":{"type":"string","title":"订单类型","description":"车票相关：\"3\"\n酒店相关:\"4\"\n订餐相关：\"5\"\n注意是字符串。\n"},"orderId":{"type":"string","title":"订单id"},"haveRead":{"type":"boolean","title":"是否已读"},"title":{"type":"string","title":"消息标题","description":"车票/酒店/餐饮 订单 支付成功/已完成/已取消；另外需要一个发车提醒。"},"messageTime":{"type":"string","title":"消息生成时间","mock":{"mock":"@datetime"}},"content":{"type":"string","title":"消息内容","description":"见示例"},"mid":{"type":"string","title":"消息id"}},"x-apifox-orders":["orderType","orderId","haveRead","title","messageTime","content","mid"],"required":["orderType","orderId","haveRead","title","messageTime","content","mid"]},"minItems":0}},"x-apifox-orders":["result"],"required":["result"]},"defaultEnable":true,"ordering":1,"description":"","mediaType":"","headers":[],"schemaDefinitions":{}},"requestDefinition":{"jsonSchema":{}},"overrideRequesterOptions":{"strictSSL":false,"followRedirects":false},"metaInfo":{"httpApiId":176471092,"httpApiCaseId":188761215,"httpApiName":"获取所有消息","httpApiPath":"/message/getAll/{userID}","httpApiMethod":"get","httpApiCaseName":"获取所有消息","id":"c6dfb610-0aef-4b53-a4f3-c6b57ddd0583","type":"http","name":"获取所有消息","relatedId":4939972,"blockId":"c6dfb610-0aef-4b53-a4f3-c6b57ddd0583"},"type":"http","protocolProfileBehavior":{"useWhatWGUrlParser":false,"disableUrlEncoding":false,"disabledSystemHeaders":{},"disableCookies":false}},{"id":"5d47f40e-e231-4585-b1ce-77d6e324621c","name":"标记消息已读","request":{"url":{"protocol":"http","port":"30001","path":["api","message","setRead","{{$.13.response.body.result[0].mid}}"],"host":["10","192","253","59"],"query":[],"variable":[{"disabled":false,"type":"string","value":"{{$.13.response.body.result[0].mid}}","key":"mid"}]},"header":[{"key":"User-Agent","value":"Apifox/1.0.0 (https://apifox.com)"}],"method":"POST","baseUrl":"http://10.192.253.59:30001/api","body":{},"auth":{"type":"noauth","noauth":[]},"type":"http"},"response":[],"event":[],"responseDefinition":{"id":455594145,"name":"成功","code":200,"contentType":"raw","jsonSchema":{"type":"object","properties":{}},"defaultEnable":true,"ordering":1,"description":"","mediaType":"","headers":[]},"requestDefinition":{"jsonSchema":{}},"overrideRequesterOptions":{"strictSSL":false,"followRedirects":false},"metaInfo":{"httpApiId":176471307,"httpApiCaseId":188761214,"httpApiName":"标记消息已读","httpApiPath":"/message/setRead/{mid}","httpApiMethod":"post","httpApiCaseName":"标记消息已读","id":"5d47f40e-e231-4585-b1ce-77d6e324621c","type":"http","name":"标记消息已读","relatedId":4939972,"blockId":"5d47f40e-e231-4585-b1ce-77d6e324621c"},"type":"http","protocolProfileBehavior":{"useWhatWGUrlParser":false,"disableUrlEncoding":false,"disabledSystemHeaders":{},"disableCookies":false}},{"id":"249a4e91-f0db-418d-b1a6-0a6c4a7d56a3","name":"标记全部已读","request":{"url":{"protocol":"http","port":"30001","path":["api","message","setAllRead","120110200001011234"],"host":["10","192","253","59"],"query":[],"variable":[{"disabled":false,"type":"string","value":"120110200001011234","key":"userId"}]},"header":[{"key":"User-Agent","value":"Apifox/1.0.0 (https://apifox.com)"}],"method":"POST","baseUrl":"http://10.192.253.59:30001/api","body":{},"auth":{"type":"noauth","noauth":[]},"type":"http"},"response":[],"event":[],"responseDefinition":{"id":462784750,"name":"成功","code":200,"contentType":"raw","jsonSchema":{"type":"object","properties":{}},"defaultEnable":true,"ordering":1,"description":"","mediaType":"","headers":[]},"requestDefinition":{"jsonSchema":{}},"overrideRequesterOptions":{"strictSSL":false,"followRedirects":false},"metaInfo":{"httpApiId":180139096,"httpApiCaseId":188761259,"httpApiName":"标记全部已读","httpApiPath":"/message/setAllRead/{userId}","httpApiMethod":"post","httpApiCaseName":"标记全部已读","id":"249a4e91-f0db-418d-b1a6-0a6c4a7d56a3","type":"http","name":"标记全部已读","relatedId":4939972,"blockId":"249a4e91-f0db-418d-b1a6-0a6c4a7d56a3"},"type":"http","protocolProfileBehavior":{"useWhatWGUrlParser":false,"disableUrlEncoding":false,"disabledSystemHeaders":{},"disableCookies":false}},{"id":"6a450891-6bdb-5c93-bd3b-18306b9410f4","type":"group","metaInfo":{"id":"6a450891-6bdb-5c93-bd3b-18306b9410f4","type":"group","scopeType":"end","scopeStartId":"b65e2a1e-2f20-5a3b-96cd-d87e63d8fb0d"}}],"name":"注册登录+酒店+消息"}],"info":{"name":"注册登录+酒店+消息"},"dataSchemas":{},"mockRules":{"rules":[],"enableSystemRule":true},"environment":{"id":20531310,"name":"开发环境","baseUrl":"http://10.192.253.59:30001/api","baseUrls":{"default":"http://10.192.253.59:30001/api"},"variable":{"id":"6e147411-6046-47ee-8ba3-3bb8ef6c812f","name":"开发环境","values":[]},"type":"normal","parameter":{"header":[],"query":[],"body":[],"cookie":[]}},"globals":{"baseUrl":"","baseUrls":{},"variable":{"id":"df3b4922-d301-45c6-be65-40d1629378d1","values":[]},"parameter":{"header":[],"query":[],"body":[],"cookie":[]}},"isServerBuild":false,"isTestFlowControl":true,"projectOptions":{"responseValidate":true,"enableJsonc":false,"isDefaultUrlEncoding":2,"enableBigint":false,"request2":true,"preferredHttpVersion":{"https":"HTTP/1","http":"HTTP/1"},"enableTestScenarioSetting":false,"enableYAPICompatScript":false}}