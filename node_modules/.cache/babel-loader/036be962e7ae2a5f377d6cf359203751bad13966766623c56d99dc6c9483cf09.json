{"ast":null,"code":"import { useModel as _useModel } from 'vue';\nimport { ref, onMounted, watch } from \"vue\";\nimport { Delete } from \"@element-plus/icons-vue\";\nexport default {\n  __name: 'foodCart',\n  props: {\n    \"modelValue\": {},\n    \"modelModifiers\": {}\n  },\n  emits: [\"update:modelValue\"],\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const model = _useModel(__props, \"modelValue\");\n    var sum_price = ref(0);\n    var isShow = ref(false);\n    const billVisible = ref(false);\n    const payVisible = ref(false);\n    const buttonVisible = ref(true);\n    const payPicture = ref(require(\"../assets/vxPay.jpg\"));\n    const clickCart = () => {\n      isShow.value = !isShow.value;\n    };\n    const clear = () => {\n      for (const item of model.value) {\n        item.num = 0;\n      }\n    };\n    const toPay = () => {\n      payVisible.value = true;\n      buttonVisible.value = false;\n    };\n    const changePay = () => {\n      if (payPicture.value === require(\"../assets/vxPay.jpg\")) payPicture.value = require(\"../assets/zfbPay.jpg\");else payPicture.value = require(\"../assets/vxPay.jpg\");\n    };\n    const resetValue = () => {\n      billVisible.value = false;\n      payVisible.value = false;\n      buttonVisible.value = true;\n      payPicture.value = require(\"../assets/vxPay.jpg\");\n    };\n    onMounted(() => {});\n    watch(model, newmodel => {\n      const total = newmodel.reduce((acc, item) => {\n        return acc + item.price * item.num;\n      }, 0);\n      // 将总价存储在 sum_price 中\n      sum_price = total;\n      if (sum_price != 0) {\n        isShow.value = true;\n      } else {\n        isShow.value = false;\n      }\n    });\n    watch(billVisible, newValue => {\n      if (newValue === false) {\n        resetValue();\n      }\n    });\n    const __returned__ = {\n      model,\n      get sum_price() {\n        return sum_price;\n      },\n      set sum_price(v) {\n        sum_price = v;\n      },\n      get isShow() {\n        return isShow;\n      },\n      set isShow(v) {\n        isShow = v;\n      },\n      billVisible,\n      payVisible,\n      buttonVisible,\n      payPicture,\n      clickCart,\n      clear,\n      toPay,\n      changePay,\n      resetValue,\n      ref,\n      onMounted,\n      watch,\n      get Delete() {\n        return Delete;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","watch","Delete","model","_useModel","__props","sum_price","isShow","billVisible","payVisible","buttonVisible","payPicture","require","clickCart","value","clear","item","num","toPay","changePay","resetValue","newmodel","total","reduce","acc","price","newValue"],"sources":["D:/University/sophomore/Software engineering/werwer_train/src/components/foodCart.vue"],"sourcesContent":["<template>\r\n  <div style=\"background-color: white; width: 21em\">\r\n    <el-card v-show=\"isShow\">\r\n      <template #header>\r\n        <div style=\"display: flex\">\r\n          <div style=\"margin-right: 1em\">购物车</div>\r\n          <el-button\r\n            :icon=\"Delete\"\r\n            circle\r\n            style=\"height: 1.6em; width: 1.6em\"\r\n            @click=\"clear\"\r\n          ></el-button>\r\n        </div>\r\n      </template>\r\n      <div v-for=\"(item, index) in model\" :key=\"index\">\r\n        <text style=\"display: inline-block; width: 6em\">{{ item.name }}</text>\r\n        <span\r\n          style=\"\r\n            display: inline-block;\r\n            width: 6em;\r\n            font-weight: bold;\r\n            color: #ffa31a;\r\n          \"\r\n          >￥{{ item.price * item.num }}</span\r\n        >\r\n        <el-input-number\r\n          v-model=\"item.num\"\r\n          size=\"small\"\r\n          :min=\"0\"\r\n          style=\"width: 6em\"\r\n        />\r\n      </div>\r\n      <template #footer>\r\n        <div\r\n          style=\"\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n          \"\r\n        >\r\n          <span>\r\n            <text>总金额：</text>\r\n            <text style=\"font-weight: bold; color: #ffa31a\"\r\n              >￥{{ sum_price }}</text\r\n            >\r\n          </span>\r\n          <div>\r\n            <el-button\r\n              color=\"#ffa31a\"\r\n              :dark=\"isDark\"\r\n              plain\r\n              :disabled=\"sum_price === 0\"\r\n              @click=\"billVisible = true\"\r\n              >结算</el-button\r\n            >\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </el-card>\r\n  </div>\r\n  <div @click=\"clickCart\" style=\"display: block; text-align: right\">\r\n    <img\r\n      src=\"../assets/shopingCart.png\"\r\n      alt=\"shoppingCart\"\r\n      style=\"width: 3em\"\r\n    />\r\n  </div>\r\n  <div>\r\n    <el-dialog v-model=\"billVisible\" title=\"确认订单\" width=\"20em\" align-center>\r\n      <div>\r\n        <div\r\n          v-for=\"(item, index) in model\"\r\n          :key=\"index\"\r\n          style=\"display: flex; justify-content: space-between\"\r\n        >\r\n          <div style=\"display: inline-block; width: 6em\">\r\n            {{ item.name }}×{{ item.num }}\r\n          </div>\r\n          <div\r\n            style=\"\r\n              display: inline-block;\r\n              width: 6em;\r\n              font-weight: bold;\r\n              color: #ffa31a;\r\n            \"\r\n          >\r\n            ￥{{ item.price * item.num }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <template #footer>\r\n        <div\r\n          style=\"\r\n            display: flex;\r\n            justify-content: space-around;\r\n            align-items: center;\r\n          \"\r\n        >\r\n          <div>\r\n            <text>总金额：</text>\r\n            <text style=\"font-weight: bold; color: #ffa31a\"\r\n              >￥{{ sum_price }}</text\r\n            >\r\n          </div>\r\n          <div class=\"dialog-footer\" v-if=\"buttonVisible\">\r\n            <el-button @click=\"billVisible = false\">取消</el-button>\r\n            <el-button\r\n              type=\"primary\"\r\n              @click=\"toPay\"\r\n              color=\"#ffa31a\"\r\n              :dark=\"isDark\"\r\n              plain\r\n            >\r\n              确认\r\n            </el-button>\r\n          </div>\r\n        </div>\r\n        <div v-if=\"payVisible\">\r\n          <img\r\n            :src=\"payPicture\"\r\n            alt=\"2DPayPicture\"\r\n            style=\"width: 100%; height: 100%; object-fit: cover\"\r\n            id\r\n          />\r\n          <div>\r\n            <el-button type=\"primary\" @click=\"changePay\"\r\n              >换一种支付方式</el-button\r\n            >\r\n            <el-button type=\"success\" @click=\"$emit('getPaid',sum_price);resetValue();clear();\"\r\n              >已完成支付</el-button\r\n            >\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { ref, onMounted, watch } from \"vue\";\r\nimport { Delete } from \"@element-plus/icons-vue\";\r\nconst model = defineModel();\r\nvar sum_price = ref(0);\r\nvar isShow = ref(false);\r\nconst billVisible = ref(false);\r\nconst payVisible = ref(false);\r\nconst buttonVisible = ref(true);\r\nconst payPicture = ref(require(\"../assets/vxPay.jpg\"));\r\nconst clickCart = () => {\r\n  isShow.value = !isShow.value;\r\n};\r\nconst clear = () => {\r\n  for (const item of model.value) {\r\n    item.num = 0;\r\n  }\r\n};\r\nconst toPay = () => {\r\n  payVisible.value = true;\r\n  buttonVisible.value = false;\r\n};\r\nconst changePay = () => {\r\n  if (payPicture.value === require(\"../assets/vxPay.jpg\"))\r\n    payPicture.value = require(\"../assets/zfbPay.jpg\");\r\n  else payPicture.value = require(\"../assets/vxPay.jpg\");\r\n};\r\nconst resetValue = () => {\r\n  billVisible.value = false;\r\n  payVisible.value = false;\r\n  buttonVisible.value = true;\r\n  payPicture.value = require(\"../assets/vxPay.jpg\");\r\n};\r\n\r\nonMounted(() => {});\r\nwatch(model, (newmodel) => {\r\n  const total = newmodel.reduce((acc, item) => {\r\n    return acc + item.price * item.num;\r\n  }, 0);\r\n  // 将总价存储在 sum_price 中\r\n  sum_price = total;\r\n  if(sum_price!=0){\r\n    isShow.value = true;\r\n  }\r\n  else{\r\n    isShow.value = false;\r\n  }\r\n});\r\nwatch(billVisible, (newValue) => {\r\n  if (newValue === false) {\r\n    resetValue();\r\n  }\r\n});\r\n</script>\r\n<style scoped>\r\n</style>"],"mappings":";AA0IA,SAASA,GAAG,EAAEC,SAAS,EAAEC,KAAK,QAAQ,KAAK;AAC3C,SAASC,MAAM,QAAQ,yBAAyB;;;;;;;;;;;;IAChD,MAAMC,KAAK,GAAGC,SAAW,CAAAC,OAAA,cAAC,CAAC;IAC3B,IAAIC,SAAS,GAAGP,GAAG,CAAC,CAAC,CAAC;IACtB,IAAIQ,MAAM,GAAGR,GAAG,CAAC,KAAK,CAAC;IACvB,MAAMS,WAAW,GAAGT,GAAG,CAAC,KAAK,CAAC;IAC9B,MAAMU,UAAU,GAAGV,GAAG,CAAC,KAAK,CAAC;IAC7B,MAAMW,aAAa,GAAGX,GAAG,CAAC,IAAI,CAAC;IAC/B,MAAMY,UAAU,GAAGZ,GAAG,CAACa,OAAO,CAAC,qBAAqB,CAAC,CAAC;IACtD,MAAMC,SAAS,GAAGA,CAAA,KAAM;MACtBN,MAAM,CAACO,KAAK,GAAG,CAACP,MAAM,CAACO,KAAK;IAC9B,CAAC;IACD,MAAMC,KAAK,GAAGA,CAAA,KAAM;MAClB,KAAK,MAAMC,IAAI,IAAIb,KAAK,CAACW,KAAK,EAAE;QAC9BE,IAAI,CAACC,GAAG,GAAG,CAAC;MACd;IACF,CAAC;IACD,MAAMC,KAAK,GAAGA,CAAA,KAAM;MAClBT,UAAU,CAACK,KAAK,GAAG,IAAI;MACvBJ,aAAa,CAACI,KAAK,GAAG,KAAK;IAC7B,CAAC;IACD,MAAMK,SAAS,GAAGA,CAAA,KAAM;MACtB,IAAIR,UAAU,CAACG,KAAK,KAAKF,OAAO,CAAC,qBAAqB,CAAC,EACrDD,UAAU,CAACG,KAAK,GAAGF,OAAO,CAAC,sBAAsB,CAAC,CAAC,KAChDD,UAAU,CAACG,KAAK,GAAGF,OAAO,CAAC,qBAAqB,CAAC;IACxD,CAAC;IACD,MAAMQ,UAAU,GAAGA,CAAA,KAAM;MACvBZ,WAAW,CAACM,KAAK,GAAG,KAAK;MACzBL,UAAU,CAACK,KAAK,GAAG,KAAK;MACxBJ,aAAa,CAACI,KAAK,GAAG,IAAI;MAC1BH,UAAU,CAACG,KAAK,GAAGF,OAAO,CAAC,qBAAqB,CAAC;IACnD,CAAC;IAEDZ,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;IACnBC,KAAK,CAACE,KAAK,EAAGkB,QAAQ,IAAK;MACzB,MAAMC,KAAK,GAAGD,QAAQ,CAACE,MAAM,CAAC,CAACC,GAAG,EAAER,IAAI,KAAK;QAC3C,OAAOQ,GAAG,GAAGR,IAAI,CAACS,KAAK,GAAGT,IAAI,CAACC,GAAG;MACpC,CAAC,EAAE,CAAC,CAAC;MACL;MACAX,SAAS,GAAGgB,KAAK;MACjB,IAAGhB,SAAS,IAAE,CAAC,EAAC;QACdC,MAAM,CAACO,KAAK,GAAG,IAAI;MACrB,CAAC,MACG;QACFP,MAAM,CAACO,KAAK,GAAG,KAAK;MACtB;IACF,CAAC,CAAC;IACFb,KAAK,CAACO,WAAW,EAAGkB,QAAQ,IAAK;MAC/B,IAAIA,QAAQ,KAAK,KAAK,EAAE;QACtBN,UAAU,CAAC,CAAC;MACd;IACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}