{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, createBlock as _createBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  style: {\n    \"display\": \"block\"\n  }\n};\nconst _hoisted_2 = {\n  style: {\n    \"font-size\": \"20px\",\n    \"font-weight\": \"bold\"\n  }\n};\nconst _hoisted_3 = {\n  style: {\n    \"font-size\": \"14px\",\n    \"margin-top\": \"5px\"\n  }\n};\nconst _hoisted_4 = {\n  style: {\n    \"font-size\": \"14px\",\n    \"margin-top\": \"5px\"\n  }\n};\nconst _hoisted_5 = {\n  style: {\n    \"font-size\": \"14px\",\n    \"margin-top\": \"5px\"\n  }\n};\nconst _hoisted_6 = {\n  style: {\n    \"color\": \"#ffa31a\",\n    \"font-weight\": \"bold\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_radio_button = _resolveComponent(\"el-radio-button\");\n  const _component_el_radio_group = _resolveComponent(\"el-radio-group\");\n  const _component_el_text = _resolveComponent(\"el-text\");\n  const _component_el_col = _resolveComponent(\"el-col\");\n  const _component_el_row = _resolveComponent(\"el-row\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_popconfirm = _resolveComponent(\"el-popconfirm\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_el_radio_group, {\n    modelValue: $setup.status,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.status = $event)\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_radio_button, {\n      label: \"全部订单\",\n      value: \"all\"\n    }), _createVNode(_component_el_radio_button, {\n      label: \"已支付\",\n      value: \"paid\"\n    }), _createVNode(_component_el_radio_button, {\n      label: \"已取消\",\n      value: \"cancle\"\n    }), _createVNode(_component_el_radio_button, {\n      label: \"已完成\",\n      value: \"done\"\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"]), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.hotelOrders, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index\n    }, [_createVNode(_component_el_card, {\n      style: {\n        \"width\": \"100%\",\n        \"border-radius\": \"25px\",\n        \"margin-top\": \"1%\",\n        \"margin-bottom\": \"1%\"\n      }\n    }, {\n      header: _withCtx(() => [_createVNode(_component_el_row, null, {\n        default: _withCtx(() => [_createVNode(_component_el_col, {\n          span: 7\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_text, {\n            tag: \"b\",\n            size: \"large\"\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"订单号: \" + _toDisplayString(item.oid), 1 /* TEXT */)]),\n            _: 2 /* DYNAMIC */\n          }, 1024 /* DYNAMIC_SLOTS */)]),\n          _: 2 /* DYNAMIC */\n        }, 1024 /* DYNAMIC_SLOTS */), _createVNode(_component_el_col, {\n          span: 7\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_text, {\n            tag: \"b\",\n            size: \"large\"\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"下单时间: \" + _toDisplayString(item.time), 1 /* TEXT */)]),\n            _: 2 /* DYNAMIC */\n          }, 1024 /* DYNAMIC_SLOTS */)]),\n          _: 2 /* DYNAMIC */\n        }, 1024 /* DYNAMIC_SLOTS */), _createVNode(_component_el_col, {\n          span: 7\n        }), _createVNode(_component_el_col, {\n          span: 3\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_text, {\n            tag: \"b\",\n            size: \"large\"\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"订单状态: \"), _createElementVNode(\"span\", {\n              style: _normalizeStyle({\n                color: $setup.getStatusColor(item.status)\n              })\n            }, _toDisplayString(item.status), 5 /* TEXT, STYLE */)]),\n            _: 2 /* DYNAMIC */\n          }, 1024 /* DYNAMIC_SLOTS */)]),\n          _: 2 /* DYNAMIC */\n        }, 1024 /* DYNAMIC_SLOTS */)]),\n        _: 2 /* DYNAMIC */\n      }, 1024 /* DYNAMIC_SLOTS */)]),\n      footer: _withCtx(() => [_createVNode(_component_el_row, null, {\n        default: _withCtx(() => [_createVNode(_component_el_col, {\n          span: 4\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_text, {\n            class: \"mx-1\",\n            size: \"large\"\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"房间数: \" + _toDisplayString(item.num), 1 /* TEXT */)]),\n            _: 2 /* DYNAMIC */\n          }, 1024 /* DYNAMIC_SLOTS */)]),\n          _: 2 /* DYNAMIC */\n        }, 1024 /* DYNAMIC_SLOTS */), _createVNode(_component_el_col, {\n          span: 3\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_text, {\n            class: \"mx-1\",\n            size: \"large\"\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"总金额: \"), _createElementVNode(\"span\", _hoisted_6, \"￥\" + _toDisplayString(item.money) + \"元\", 1 /* TEXT */)]),\n            _: 2 /* DYNAMIC */\n          }, 1024 /* DYNAMIC_SLOTS */)]),\n          _: 2 /* DYNAMIC */\n        }, 1024 /* DYNAMIC_SLOTS */), item.status === '已支付' ? (_openBlock(), _createBlock(_component_el_col, {\n          key: 0,\n          span: 2,\n          offset: 15\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_popconfirm, {\n            title: \"确定要取消这个订单吗？\",\n            onConfirm: $event => $setup.cancelOrders(item.oid)\n          }, {\n            reference: _withCtx(() => [_createVNode(_component_el_button, {\n              size: \"large\",\n              type: \"warning\",\n              plain: \"\",\n              style: {\n                \"margin-top\": \"-1%\"\n              }\n            }, {\n              default: _withCtx(() => [_createTextVNode(\"取消订单\")]),\n              _: 1 /* STABLE */\n            })]),\n            _: 2 /* DYNAMIC */\n          }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onConfirm\"])]),\n          _: 2 /* DYNAMIC */\n        }, 1024 /* DYNAMIC_SLOTS */)) : _createCommentVNode(\"v-if\", true)]),\n        _: 2 /* DYNAMIC */\n      }, 1024 /* DYNAMIC_SLOTS */)]),\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, _toDisplayString(item.name), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_3, _toDisplayString(item.position), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_4, \" 入住日期: \" + _toDisplayString(item.check_in) + \"至\" + _toDisplayString(item.check_out), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_5, _toDisplayString(item.roomtype), 1 /* TEXT */)])]),\n      _: 2 /* DYNAMIC */\n    }, 1024 /* DYNAMIC_SLOTS */)]);\n  }), 128 /* KEYED_FRAGMENT */))], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["style","_createElementBlock","_Fragment","_createVNode","_component_el_radio_group","modelValue","$setup","status","_cache","$event","default","_withCtx","_component_el_radio_button","label","value","_","_renderList","hotelOrders","item","index","key","_component_el_card","header","_component_el_row","_component_el_col","span","_component_el_text","tag","size","_createTextVNode","_toDisplayString","oid","time","_createElementVNode","_normalizeStyle","color","getStatusColor","footer","class","num","_hoisted_6","money","_createBlock","offset","_component_el_popconfirm","title","onConfirm","cancelOrders","reference","_component_el_button","type","plain","_createCommentVNode","_hoisted_1","_hoisted_2","name","_hoisted_3","position","_hoisted_4","check_in","check_out","_hoisted_5","roomtype"],"sources":["D:\\University\\sophomore\\Software engineering\\werwer_train\\src\\components\\orders\\hotel.vue"],"sourcesContent":["<template>\r\n    <el-radio-group v-model=\"status\">\r\n        <el-radio-button label=\"全部订单\" value=\"all\"></el-radio-button>\r\n        <el-radio-button label=\"已支付\" value=\"paid\"></el-radio-button>\r\n        <el-radio-button label=\"已取消\" value=\"cancle\"></el-radio-button>\r\n        <el-radio-button label=\"已完成\" value=\"done\"></el-radio-button>\r\n    </el-radio-group>\r\n    <div v-for=\"(item, index) in hotelOrders\" :key=\"index\">\r\n        <el-card style=\"width: 100%;border-radius: 25px;margin-top:1%;margin-bottom:1%;\">\r\n            <template #header>\r\n                <el-row>\r\n                    <el-col :span=\"7\">\r\n                        <el-text tag=\"b\" size=\"large\">订单号: {{ item.oid }}</el-text>\r\n                    </el-col>\r\n                    <el-col :span=\"7\">\r\n                        <el-text tag=\"b\" size=\"large\">下单时间: {{ item.time }}</el-text>\r\n                    </el-col>\r\n                    <el-col :span=\"7\">\r\n                    </el-col>\r\n                    <el-col :span=\"3\">\r\n                        <el-text tag=\"b\" size=\"large\">订单状态: <span :style=\"{ color: getStatusColor(item.status) }\">{{\r\n                                item.status }}</span></el-text>\r\n                    </el-col>\r\n                </el-row>\r\n            </template>\r\n            <div style=\"display:block;\">\r\n                <div style=\"font-size:20px;font-weight:bold\">{{item.name}}</div>\r\n                <div style=\"font-size:14px;margin-top:5px;\">{{item.position}}</div>\r\n                <div style=\"font-size:14px;margin-top:5px;\">\r\n                入住日期: {{item.check_in}}至{{item.check_out}}\r\n                </div>\r\n                <div style=\"font-size:14px;margin-top:5px;\">{{item.roomtype}}</div>\r\n            </div>\r\n            \r\n           \r\n            <template #footer>\r\n                <el-row>\r\n                    <el-col :span=\"4\">\r\n                        <el-text class=\"mx-1\" size=\"large\">房间数: {{ item.num }}</el-text>\r\n                    </el-col>\r\n                    <el-col :span=\"3\">\r\n                        <el-text class=\"mx-1\" size=\"large\">总金额: <span style=\"color:#ffa31a;font-weight: bold;\">￥{{\r\n                            item.money\r\n                                }}元</span></el-text>\r\n                    </el-col>\r\n                    <el-col :span=\"2\" v-if=\"item.status === '已支付'\" :offset=\"15\">\r\n                        <el-popconfirm title=\"确定要取消这个订单吗？\" @confirm=\"cancelOrders(item.oid)\">\r\n                            <template #reference>\r\n                                <el-button size=\"large\" type=\"warning\" plain style=\"margin-top:-1%;\">取消订单</el-button>\r\n                            </template>\r\n                        </el-popconfirm>\r\n                    </el-col>\r\n                </el-row>\r\n            </template>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n<script setup>\r\nimport { onMounted, ref, watch } from \"vue\";\r\nimport { getHotelOrders, cancelHotelOrder } from \"../../api/api.js\";\r\nimport { ElMessage } from \"element-plus\";\r\nconst status = ref(\"all\");\r\nconst userID = \"0000\";\r\nconst hotelOrders = ref([]);\r\nconst cancelOrders=async(oid)=>{\r\n    try {\r\n        const responce = await cancelHotelOrder(userID, oid);\r\n        if (responce.data.result) {\r\n            ElMessage({\r\n                message: '取消订单成功，退款将原路返回。',\r\n                type: \"success\",\r\n            });\r\n            //TODO 通知消息弹窗\r\n        }\r\n        else {\r\n            ElMessage.error(\"取消订单失败\");\r\n        }\r\n    } catch (error) {\r\n        console.error(\"取消订单失败\", error);\r\n        ElMessage.error(\"取消订单失败\");\r\n    }\r\n    getOrders();\r\n}\r\nconst getStatusColor = (status) => {\r\n    if (status === '已完成') {\r\n        return '#60B2FF';\r\n    } else if (status === '已支付') {\r\n        return '#24D36F';\r\n    } else if (status === '已取消') {\r\n        return '#FC604F';\r\n    }\r\n};\r\nconst hideMiddle = (val) => {\r\n    return `${val.substring(0, 3)}************${val.substring(val.length - 3)}`\r\n}\r\nconst getOrders = async () => {\r\n    try {\r\n        const response = await getHotelOrders(userID, status.value);\r\n        console.log(status.value);\r\n        hotelOrders.value = response.data.result;\r\n    } catch (error) {\r\n        console.error(\"获取火车票订单数组失败:\", error);\r\n    }\r\n};\r\nwatch(status, (newValue) => {\r\n    console.log(\"状态切换为\", newValue);\r\n    getOrders();\r\n});\r\nonMounted(() => {\r\n    getOrders();\r\n});\r\n</script>\r\n<style>\r\n.el-card .el-card__header {\r\n    background-color: #f0f8ff;\r\n}\r\n\r\n.scrollbar-flex-content {\r\n    display: flex;\r\n    margin-top: 1%;\r\n    justify-content: center;\r\n}\r\n\r\n.scrollbar-demo-item {\r\n    flex-shrink: 0;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    width: 300px;\r\n    height: 50px;\r\n    margin: 15px;\r\n    text-align: center;\r\n    border-radius: 4px;\r\n    background-color: #f0f8ff !important;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}