{"ast":null,"code":"import { onMounted, ref, watch } from \"vue\";\nimport { getFoodOrders, cancelFoodOrder, deleteFoodOrder } from \"../../api/api.js\";\nimport { ElMessage } from \"element-plus\";\nimport { useRoute } from \"vue-router\";\nconst userID = \"0000\";\nexport default {\n  __name: 'food',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const activeNames = ref([]);\n    const foodOrders = ref([]);\n\n    // const foodOrders = ref([\n    //   {\n    //     tid: \"strin1\",\n    //     oid: \"string1\",\n    //     date: \"string\",\n    //     time: \"午餐\",\n    //     order_time: \"string\",\n    //     status: \"已支付\",\n    //     sum_price: 100,\n    //     foods: [\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //     ],\n    //   },\n    //   {\n    //     tid: \"strin2\",\n    //     oid: \"string2\",\n    //     date: \"string\",\n    //     time: \"午餐\",\n    //     order_time: \"string\",\n    //     status: \"已支付\",\n    //     sum_price: 100,\n    //     foods: [\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //     ],\n    //   },\n    //   {\n    //     tid: \"strin3\",\n    //     oid: \"string3\",\n    //     date: \"string\",\n    //     time: \"午餐\",\n    //     order_time: \"string\",\n    //     status: \"已支付\",\n    //     sum_price: 100,\n    //     foods: [\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //     ],\n    //   },\n    //   {\n    //     tid: \"strin4\",\n    //     oid: \"string4\",\n    //     date: \"string\",\n    //     time: \"午餐\",\n    //     order_time: \"string\",\n    //     status: \"已支付\",\n    //     sum_price: 100,\n    //     foods: [\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //     ],\n    //   },\n    //   {\n    //     tid: \"strin\",\n    //     oid: \"string5\",\n    //     date: \"string\",\n    //     time: \"午餐\",\n    //     order_time: \"string\",\n    //     status: \"已支付\",\n    //     sum_price: 100,\n    //     foods: [\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //       {\n    //         food_name: \"string\",\n    //         count: 1,\n    //         photo:\n    //           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\n    //       },\n    //     ],\n    //   },\n    // ]);\n\n    const status = ref(\"all\");\n    const route = useRoute();\n    const scrollToOrder = orderId => {\n      const orderElement = document.getElementById(orderId);\n      console.log(\"滚动到：\", orderId);\n      if (orderElement) {\n        orderElement.scrollIntoView({\n          behavior: 'smooth',\n          block: 'center'\n        });\n        setTimeout(() => {\n          const tempActiveNames = [orderElement.__vueParentComponent.props.name];\n          activeNames.value = tempActiveNames;\n          console.log(\"模拟点击展开\", activeNames.value);\n        }, 300); // 延迟一段时间，确保滚动完成\n      }\n    };\n    const getStatusColor = status => {\n      if (status === \"已完成\") {\n        return \"#60B2FF\";\n      } else if (status === \"已支付\") {\n        return \"#24D36F\";\n      } else if (status === \"已取消\") {\n        return \"#FC604F\";\n      }\n    };\n    const handleChange = val => {\n      console.log(\"展开了\", val);\n    };\n    const getOrders = async () => {\n      try {\n        const response = await getFoodOrders(userID, status.value);\n        console.log(status.value);\n        foodOrders.value = response.data.result;\n      } catch (error) {\n        console.error(\"获取火车餐订单数组失败:\", error);\n      }\n    };\n    const cancelOrder = async oid => {\n      try {\n        const responce = await cancelFoodOrder(userID, oid);\n        if (responce.data.result) {\n          ElMessage({\n            message: \"取消订单成功\",\n            type: \"success\"\n          });\n          //TODO 通知消息弹窗\n        } else {\n          ElMessage.error(\"取消订单失败\" + responce.data.info);\n        }\n      } catch (error) {\n        console.error(\"取消订单失败\", error);\n        ElMessage.error(\"取消订单失败\");\n      }\n      getOrders();\n    };\n    const deleteOrder = async oid => {\n      try {\n        const responce = await deleteFoodOrder(userID, oid);\n        if (responce.data.result) {\n          ElMessage({\n            message: \"删除订单成功\",\n            type: \"success\"\n          });\n        } else {\n          ElMessage.error(\"删除订单失败，订单不存在\");\n        }\n      } catch (error) {\n        console.error(\"删除订单失败\", error);\n        ElMessage.error(\"删除订单失败\");\n      }\n      getOrders();\n    };\n    onMounted(() => {\n      getOrders();\n      const orderId = route.query.orderId;\n      if (orderId) {\n        scrollToOrder(orderId);\n      }\n    });\n    watch(status, newValue => {\n      console.log(\"状态切换为\", newValue);\n      getOrders();\n    });\n    //setInterval(getOrders,1000);\n\n    const __returned__ = {\n      activeNames,\n      foodOrders,\n      status,\n      userID,\n      route,\n      scrollToOrder,\n      getStatusColor,\n      handleChange,\n      getOrders,\n      cancelOrder,\n      deleteOrder,\n      onMounted,\n      ref,\n      watch,\n      get getFoodOrders() {\n        return getFoodOrders;\n      },\n      get cancelFoodOrder() {\n        return cancelFoodOrder;\n      },\n      get deleteFoodOrder() {\n        return deleteFoodOrder;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      get useRoute() {\n        return useRoute;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","ref","watch","getFoodOrders","cancelFoodOrder","deleteFoodOrder","ElMessage","useRoute","userID","activeNames","foodOrders","status","route","scrollToOrder","orderId","orderElement","document","getElementById","console","log","scrollIntoView","behavior","block","setTimeout","tempActiveNames","__vueParentComponent","props","name","value","getStatusColor","handleChange","val","getOrders","response","data","result","error","cancelOrder","oid","responce","message","type","info","deleteOrder","query","newValue"],"sources":["D:/University/sophomore/Software engineering/werwer_train/src/components/orders/food.vue"],"sourcesContent":["<template>\r\n  <div class=\"box\">\r\n  <div style=\"overflow: hidden;\">\r\n    <el-radio-group v-model=\"status\">\r\n      <el-radio-button label=\"全部订单\" value=\"all\"></el-radio-button>\r\n      <el-radio-button label=\"已支付\" value=\"paid\"></el-radio-button>\r\n      <el-radio-button label=\"已取消\" value=\"cancle\"></el-radio-button>\r\n      <el-radio-button label=\"已完成\" value=\"done\"></el-radio-button>\r\n    </el-radio-group>\r\n  </div>\r\n  <div>\r\n    <el-scrollbar id=\"outer\">\r\n    <el-collapse v-model=\"activeNames\" @change=\"handleChange\">\r\n      <el-collapse-item v-for=\"(item, index) in foodOrders\"\r\n        :id=\"item.oid\" :name=\"index\" >\r\n        <template #title>\r\n          <div style=\"width: 100%;\">\r\n            <el-row>\r\n              <el-col :span=\"4\">\r\n                <div style=\"font-size: 1.5em; color: #79bbff\">\r\n                  {{ item.tid }}\r\n                </div>\r\n              </el-col>\r\n              <el-col :span=\"6\">\r\n                <div style=\"font-size: 1.1em; color: #73767a\">\r\n                  {{ item.date }} {{ item.time }}\r\n                </div>\r\n              </el-col>\r\n              <el-col :span=\"10\">\r\n                <div style=\"font-size: 1.1em; color: #c8c9cc\">\r\n                  下单时间：{{ item.order_time }}\r\n                </div>\r\n              </el-col>\r\n              <el-col :span=\"4\">\r\n                <div>\r\n                  <span style=\"font-size: 1.1em; color: #73767a\">订单状态：</span>\r\n                  <span style=\"font-size: 1.2em; color: #79bbff\" :style=\"{ color: getStatusColor(item.status) }\">{{\r\n                    item.status }}\r\n                  </span>\r\n\r\n                </div>\r\n              </el-col>\r\n            </el-row>\r\n          </div>\r\n        </template>\r\n        <tempalte #default>\r\n          <el-container style=\"height: 12em\">\r\n            <el-main style=\"padding:0\">\r\n              <el-scrollbar>\r\n                <div class=\"scrollbar-flex-content\">\r\n                  <p v-for=\"(food, index2) in item.foods\" :key=\"index2\" class=\"scrollbar-demo-item\">\r\n                  <div>\r\n                    <img loading=\"lazy\" referrerpolicy=\"no-referrer\" object-fit=\"contain\" :src=\"food.photo\" style=\"\r\n                          width: 8em;\r\n                          height: 8em;\r\n                          display: block;\r\n                          margin: auto;\r\n                        \" />\r\n                    <div>\r\n                      <span>{{ food.food_name }}</span>\r\n                      <span style=\"font-weight: bold; color: #ffa31a\">\r\n                        ×{{ food.count }}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                  </p>\r\n                </div>\r\n              </el-scrollbar>\r\n            </el-main>\r\n            <el-aside style=\"\r\n                width: 45%;\r\n                padding-left: 2%;\r\n                text-align: left;\r\n                align-content: center;\r\n              \">\r\n              <span style=\"font-size: 1.2em; color: #c8c9cc;margin-right:2%;\">总价</span>\r\n              <span style=\"font-size: 2.5em; color: #ffa31a\">￥{{ item.sum_price }}</span>\r\n              <div class=\"mb-4\" style=\"text-align: right\">\r\n                <span v-if=\"item.status === '已支付'\" style=\"margin-right: 1%\">\r\n                  <el-popconfirm title=\"确定要取消这个订单吗？\" @confirm=\"cancelOrder(item.oid)\">\r\n                    <template #reference>\r\n                      <el-button type=\"info\" text bg>取消订单</el-button>\r\n                    </template>\r\n                  </el-popconfirm>\r\n                </span>\r\n\r\n                <span>\r\n                  <el-popconfirm title=\"确定要删除这个订单吗？删除后将不可恢复。\" @confirm=\"deleteOrder(item.oid)\">\r\n                    <template #reference>\r\n                      <el-button type=\"info\" text bg>删除订单</el-button>\r\n                    </template>\r\n                  </el-popconfirm>\r\n                </span>\r\n              </div>\r\n            </el-aside>\r\n          </el-container>\r\n        </tempalte>\r\n      </el-collapse-item>\r\n    </el-collapse>\r\n  </el-scrollbar>\r\n  </div></div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, ref, watch } from \"vue\";\r\nimport {\r\n  getFoodOrders,\r\n  cancelFoodOrder,\r\n  deleteFoodOrder,\r\n} from \"../../api/api.js\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { useRoute } from \"vue-router\";\r\n\r\nconst activeNames = ref([]);\r\nconst foodOrders = ref([]);\r\n\r\n// const foodOrders = ref([\r\n//   {\r\n//     tid: \"strin1\",\r\n//     oid: \"string1\",\r\n//     date: \"string\",\r\n//     time: \"午餐\",\r\n//     order_time: \"string\",\r\n//     status: \"已支付\",\r\n//     sum_price: 100,\r\n//     foods: [\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//     ],\r\n//   },\r\n//   {\r\n//     tid: \"strin2\",\r\n//     oid: \"string2\",\r\n//     date: \"string\",\r\n//     time: \"午餐\",\r\n//     order_time: \"string\",\r\n//     status: \"已支付\",\r\n//     sum_price: 100,\r\n//     foods: [\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//     ],\r\n//   },\r\n//   {\r\n//     tid: \"strin3\",\r\n//     oid: \"string3\",\r\n//     date: \"string\",\r\n//     time: \"午餐\",\r\n//     order_time: \"string\",\r\n//     status: \"已支付\",\r\n//     sum_price: 100,\r\n//     foods: [\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//     ],\r\n//   },\r\n//   {\r\n//     tid: \"strin4\",\r\n//     oid: \"string4\",\r\n//     date: \"string\",\r\n//     time: \"午餐\",\r\n//     order_time: \"string\",\r\n//     status: \"已支付\",\r\n//     sum_price: 100,\r\n//     foods: [\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//     ],\r\n//   },\r\n//   {\r\n//     tid: \"strin\",\r\n//     oid: \"string5\",\r\n//     date: \"string\",\r\n//     time: \"午餐\",\r\n//     order_time: \"string\",\r\n//     status: \"已支付\",\r\n//     sum_price: 100,\r\n//     foods: [\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//       {\r\n//         food_name: \"string\",\r\n//         count: 1,\r\n//         photo:\r\n//           \"https://c-ssl.duitang.com/uploads/blog/202203/17/20220317122044_7f0a8.jpeg\",\r\n//       },\r\n//     ],\r\n//   },\r\n// ]);\r\n\r\nconst status = ref(\"all\");\r\nconst userID = \"0000\";\r\nconst route = useRoute();\r\nconst scrollToOrder = (orderId) => {\r\n  const orderElement = document.getElementById(orderId);\r\n  console.log(\"滚动到：\", orderId);\r\n  if (orderElement) {\r\n    orderElement.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n    setTimeout(() => {\r\n      const tempActiveNames = [orderElement.__vueParentComponent.props.name];\r\n      activeNames.value = tempActiveNames;\r\n      console.log(\"模拟点击展开\", activeNames.value);\r\n    }, 300); // 延迟一段时间，确保滚动完成\r\n  }\r\n};\r\nconst getStatusColor = (status) => {\r\n  if (status === \"已完成\") {\r\n    return \"#60B2FF\";\r\n  } else if (status === \"已支付\") {\r\n    return \"#24D36F\";\r\n  } else if (status === \"已取消\") {\r\n    return \"#FC604F\";\r\n  }\r\n};\r\nconst handleChange = (val) => {\r\n  console.log(\"展开了\", val);\r\n};\r\nconst getOrders = async () => {\r\n  try {\r\n    const response = await getFoodOrders(userID, status.value);\r\n    console.log(status.value);\r\n    foodOrders.value = response.data.result;\r\n  } catch (error) {\r\n    console.error(\"获取火车餐订单数组失败:\", error);\r\n  }\r\n};\r\nconst cancelOrder = async (oid) => {\r\n  try {\r\n    const responce = await cancelFoodOrder(userID, oid);\r\n    if (responce.data.result) {\r\n      ElMessage({\r\n        message: \"取消订单成功\",\r\n        type: \"success\",\r\n      });\r\n      //TODO 通知消息弹窗\r\n    } else {\r\n      ElMessage.error(\"取消订单失败\" + responce.data.info);\r\n    }\r\n  } catch (error) {\r\n    console.error(\"取消订单失败\", error);\r\n    ElMessage.error(\"取消订单失败\");\r\n  }\r\n  getOrders();\r\n};\r\nconst deleteOrder = async (oid) => {\r\n  try {\r\n    const responce = await deleteFoodOrder(userID, oid);\r\n    if (responce.data.result) {\r\n      ElMessage({\r\n        message: \"删除订单成功\",\r\n        type: \"success\",\r\n      });\r\n    } else {\r\n      ElMessage.error(\"删除订单失败，订单不存在\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\"删除订单失败\", error);\r\n    ElMessage.error(\"删除订单失败\");\r\n  }\r\n  getOrders();\r\n};\r\n\r\nonMounted(() => {\r\n  getOrders();\r\n  const orderId = route.query.orderId;\r\n  if (orderId) {\r\n    scrollToOrder(orderId);\r\n  }\r\n});\r\nwatch(status, (newValue) => {\r\n  console.log(\"状态切换为\", newValue);\r\n  getOrders();\r\n});\r\n//setInterval(getOrders,1000);\r\n</script>\r\n\r\n<style scoped>\r\n.scrollbar-flex-content {\r\n  display: flex;\r\n}\r\n.scrollbar-demo-item {\r\n  flex-shrink: 0;\r\n  display: flex;\r\n  justify-content: center;\r\n  width: 10em;\r\n  height: 10em;\r\n  margin: 0.25em;\r\n  padding: 0.5em;\r\n  text-align: center;\r\n  border-radius: 4px;\r\n  background: #fff5e5;\r\n  color: var(--el-color-danger);\r\n}\r\n\r\n.el-collapse-item:focus {\r\n  outline: 2px solid #409eff; /* 示例聚焦样式 */\r\n}\r\n.box {\r\n  \r\n  overflow-y: scroll;\r\n}\r\n</style>"],"mappings":"AAwGA,SAASA,SAAS,EAAEC,GAAG,EAAEC,KAAK,QAAQ,KAAK;AAC3C,SACEC,aAAa,EACbC,eAAe,EACfC,eAAe,QACV,kBAAkB;AACzB,SAASC,SAAS,QAAQ,cAAc;AACxC,SAASC,QAAQ,QAAQ,YAAY;AAsNrC,MAAMC,MAAM,GAAG,MAAM;;;;;;;IApNrB,MAAMC,WAAW,GAAGR,GAAG,CAAC,EAAE,CAAC;IAC3B,MAAMS,UAAU,GAAGT,GAAG,CAAC,EAAE,CAAC;;IAE1B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAC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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}